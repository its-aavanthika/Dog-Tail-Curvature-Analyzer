<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Tail Analysis Result</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #fdfbfb, #ebedee);
      text-align: center;
      padding: 40px;
      color: #333;
    }
    img {
      max-width: 400px;
      margin: 20px auto;
      display: block;
    }
    .slider {
      margin-top: 20px;
    }
    h2 {
      margin-top: 30px;
    }
    .button {
      display: inline-block;
      margin-top: 25px;
      padding: 12px 24px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <h1>Tail Curvature Analysis</h1>
  <p><strong>Tail Angle:</strong> {{ angle }}°</p>
  <p><strong>Tail Straightness Score:</strong> {{ score }}%</p>
  <p><strong>Horoscope:</strong> {{ horoscope }}</p>
  <p><strong>You most resemble:</strong> {{ match }}</p>
  {% if extra_note %}
  <p><em>{{ extra_note }}</em></p>
  {% endif %}

  <h2>Use the Slider to straighten your dog's tail:</h2>
  <img id="rotated-tail" src="/static/{{ tail_image }}?v={{ tail_image }}" alt="Tail">

  <div class="slider">
    <input type="range" min="-90" max="90" value="0" id="rotationSlider">
    <p id="sliderText" style="margin-top: 10px; font-style: italic;"></p>
  </div>

  <a class="button" href="/certificate/{{ certificate_image }}?v={{ certificate_image }}">Download Certificate</a>

  <h2>Generated Certificate:</h2>
  <img src="/static/{{ certificate_image }}?v={{ certificate_image }}" alt="Certificate">


  <script>
    const slider = document.getElementById('rotationSlider');
    const tailImage = document.getElementById('rotated-tail');
    const text = document.getElementById('sliderText');
    let rotated = false;

    slider.addEventListener('input', () => {
      const angle = slider.value;
      tailImage.style.transform = `rotate(${angle}deg)`;

      if (!rotated && angle != 0) {
        text.innerText = "Nice try. But some things can’t be fixed.";
        rotated = true;
      }
    });
  </script>
</body>
</html>
